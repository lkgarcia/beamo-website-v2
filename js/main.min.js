document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("currentYear"),t=document.getElementById("appVersion");if(e&&(e.textContent=(new Date).getFullYear()),t){const e=t.getAttribute("data-version");e&&"VERSION_PLACEHOLDER"!==e&&(t.textContent=` (v${e})`)}const n=document.getElementById("navbar");let o=!1;const r=()=>{const e=window.scrollY,t=Math.min(e/200,1);n.style.setProperty("--navbar-opacity",t),e>40?n.classList.add("scrolled"):n.classList.remove("scrolled"),o=!1};window.addEventListener("scroll",()=>{o||(requestAnimationFrame(r),o=!0)},{passive:!0});const s=document.getElementById("navToggle"),i=document.getElementById("navLinks");s.addEventListener("click",()=>{s.classList.toggle("active"),i.classList.toggle("open")}),i.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{s.classList.remove("active"),i.classList.remove("open")})});document.querySelectorAll(".nav-item--dropdown").forEach(e=>{e.querySelector(":scope > a").addEventListener("click",t=>{window.innerWidth<=768&&(t.preventDefault(),e.classList.toggle("open"))})});const a=document.querySelectorAll("section[id]"),l=document.querySelectorAll(".nav-links a:not(.btn)");window.addEventListener("scroll",()=>{const e=window.scrollY+100;a.forEach(t=>{const n=t.offsetTop,o=t.offsetHeight,r=t.getAttribute("id");e>=n&&e<n+o&&l.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${r}`&&e.classList.add("active")})})},{passive:!0});const c=document.querySelectorAll(".service-text, .service-visual, .about-text, .about-visual, .testimonial-card, .faq-item, .contact-info, .contact-form, .feature-card, .product-card");c.forEach(e=>e.classList.add("fade-in"));const d=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.parentElement;if(e.target.classList.contains("feature-card")||e.target.classList.contains("testimonial-card")||e.target.classList.contains("product-card")){const n=Array.from(t.children).indexOf(e.target);e.target.style.transitionDelay=.08*n+"s"}e.target.classList.add("visible"),d.unobserve(e.target)}})},{threshold:.1,rootMargin:"0px 0px -40px 0px"});c.forEach(e=>d.observe(e));const m=document.getElementById("contactForm");m.addEventListener("submit",e=>{e.preventDefault();const t=document.getElementById("name").value.trim(),n=document.getElementById("email").value.trim(),o=document.getElementById("message").value.trim();if(console.log("Contact form submitted:",{name:t,email:n,message:o}),!t||!n||!o)return console.error("Form validation failed: All fields are required"),void alert("Please fill in all fields");const r=`mailto:hello@beamo.ph?subject=${encodeURIComponent(`Contact Form Submission from ${t}`)}&body=${encodeURIComponent(`Name: ${t}\nEmail: ${n}\n\nMessage:\n${o}`)}`;console.log("Generated mailto URL:",r);const s=m.querySelector('button[type="submit"]'),i=s.textContent;s.textContent="Opening email client…",s.disabled=!0;try{window.location.href=r,console.log("Successfully triggered mailto operation"),setTimeout(()=>{s.textContent="Email Draft Opened ✓",s.style.background="#6DD794",m.reset(),setTimeout(()=>{s.textContent=i,s.style.background="",s.disabled=!1},2500)},500)}catch(e){console.error("Error opening email client:",e),alert("There was an error opening your email client. Please try again."),s.textContent=i,s.disabled=!1}}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("href");if("#"===o)return;const r=document.querySelector(o);if(r){t.preventDefault();const e=n.offsetHeight+16,o=r.getBoundingClientRect().top+window.scrollY-e;window.scrollTo({top:o,behavior:"smooth"})}})});const u=document.querySelector(".browser-frame");if(u){const e=u.querySelectorAll(".code-line-row");let t=!1;const n=(e,t)=>{const n=e.querySelector(".code-content"),o=n.innerHTML;n.innerHTML="",n.style.width="auto",e.classList.add("typing");const r=document.createElement("div");r.innerHTML=o;const s=r.textContent.length;let i=0;const a=()=>{if(i++,i<=s){let e=0,t=0,r=!1;for(let n=0;n<o.length;n++)if("<"===o[n]&&(r=!0),r||e++,">"===o[n]&&(r=!1),e>=i&&!r){t=n+1;break}n.innerHTML=o.substring(0,t),setTimeout(a,60)}else n.innerHTML=o,e.classList.remove("typing"),e.classList.add("typed"),t&&t()};setTimeout(a,60)},o=()=>{if(t)return;t=!0,e.forEach(e=>{e.querySelector(".code-content").style.width="0"});const o=t=>{if(t>=e.length){return void e[e.length-1].classList.add("typing")}n(e[t],()=>{setTimeout(()=>o(t+1),200)})};setTimeout(()=>o(0),400)},r=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(o(),r.unobserve(e.target))})},{threshold:.3});r.observe(u)}const g=document.querySelectorAll(".faq-item");g.forEach(e=>{e.querySelector("summary").addEventListener("click",t=>{t.preventDefault();const n=e.hasAttribute("open");if(g.forEach(t=>{if(t!==e&&t.hasAttribute("open")){const e=t.querySelector(".faq-answer");e.style.maxHeight=e.scrollHeight+"px",requestAnimationFrame(()=>{e.style.maxHeight="0",e.style.padding="0"}),e.addEventListener("transitionend",function n(){t.removeAttribute("open"),e.removeEventListener("transitionend",n)})}}),n){const t=e.querySelector(".faq-answer");t.style.maxHeight=t.scrollHeight+"px",requestAnimationFrame(()=>{t.style.maxHeight="0",t.style.padding="0"}),t.addEventListener("transitionend",function n(){e.removeAttribute("open"),t.removeEventListener("transitionend",n)})}else{e.setAttribute("open","");const t=e.querySelector(".faq-answer");t.style.maxHeight="0",t.style.padding="0",requestAnimationFrame(()=>{t.style.maxHeight=t.scrollHeight+"px",t.style.padding=""})}})})});